<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ZTA - Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    background: #0f0f16;
    color: white;
    margin: 0;
    font-family: Arial;
}

h1 {
    text-align: center;
    margin-top: 30px;
}

.table-box {
    width: 90%;
    margin: 30px auto;
    background: #1a1c28;
    padding: 20px;
    border-radius: 10px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 15px;
    text-align: left;
}

th {
    background: #111;
}

tr:nth-child(even) {
    background: #161823;
}

button {
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.ban { background: #ff4040; }
.unban { background: #2ecc71; }
.delete { background: #6c63ff; }
</style>
</head>

<body>

<h1>Admin Panel</h1>

<div class="table-box">
    <table>
        <thead>
            <tr>
                <th>Email</th>
                <th>Username</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>

        <tbody id="userTable"></tbody>
    </table>
</div>

<script type="module">

import { auth, db } from "./firebase.js";
import { collection, getDocs, doc, updateDoc, deleteDoc } 
    from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

/* ============================
   LOAD USER LIST
============================ */
async function loadUsers() {
    const tb = document.getElementById("userTable");
    tb.innerHTML = "Loading...";

    const snap = await getDocs(collection(db, "users"));
    tb.innerHTML = "";

    snap.forEach(u => {
        const d = u.data();

        let tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${d.email}</td>
            <td>${d.username}</td>
            <td>${d.banned ? "<b style='color:red'>BANNED</b>" : "Active"}</td>
            <td>
                ${d.banned 
                    ? `<button class="unban" onclick="unban('${u.id}')">Unban</button>`
                    : `<button class="ban" onclick="ban('${u.id}')">Ban</button>`}
                <button class="delete" onclick="deleteUser('${u.id}')">Delete</button>
            </td>
        `;

        tb.appendChild(tr);
    });
}

/* ============================
   BAN USER
============================ */
window.ban = async function(uid) {
    await updateDoc(doc(db, "users", uid), { banned: true });
    loadUsers();
};

/* ============================
   UNBAN USER
============================ */
window.unban = async function(uid) {
    await updateDoc(doc(db, "users", uid), { banned: false });
    loadUsers();
};
<h1>Admin Dashboard</h1>

<div id="stats"></div>

<h2>Users</h2>
<div id="usersList"></div>

<h2>Gallery Images</h2>
<div id="galleryList"></div>

<script type="module" src="admin.js"></script>
    
/* ============================
   DELETE USER
============================ */
window.deleteUser = async function(uid) {
    if (!confirm("Delete this user?")) return;

    await deleteDoc(doc(db, "users", uid));
    loadUsers();
};

loadUsers();
</script>

</body>
</html>
